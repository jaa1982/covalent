{
  "version": 3,
  "file": "covalent-http.umd.js",
  "sources": [
    "ng://@covalent/http/out/http-rest.service.ts",
    "ng://@covalent/http/out/http.module.ts",
    "ng://@covalent/http/out/interceptors/url-regexp-interceptor-matcher.class.ts",
    "ng://@covalent/http/out/interceptors/http-interceptor.service.ts"
  ],
  "sourcesContent": [
    "import { Headers, RequestOptionsArgs, Response, Request } from '@angular/http';\r\nimport { map, catchError } from 'rxjs/operators';\r\nimport { Observable, Subscriber } from 'rxjs';\r\n\r\nexport interface IRestTransform {\r\n  (response: Response): any;\r\n}\r\n\r\nexport interface IRestConfig {\r\n  baseHeaders?: Headers;\r\n  dynamicHeaders?: () => Headers;\r\n  baseUrl: string;\r\n  path?: string;\r\n  transform?: IRestTransform;\r\n}\r\n\r\nexport interface IRestQuery {\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface IHttp {\r\n  delete: (url: string, options?: RequestOptionsArgs) => Observable<Response>;\r\n  get: (url: string, options?: RequestOptionsArgs) => Observable<Response>;\r\n  head: (url: string, options?: RequestOptionsArgs) => Observable<Response>;\r\n  patch: (url: string, body: any, options?: RequestOptionsArgs) => Observable<Response>;\r\n  post: (url: string, body: any, options?: RequestOptionsArgs) => Observable<Response>;\r\n  put: (url: string, body: any, options?: RequestOptionsArgs) => Observable<Response>;\r\n  request: (url: string | Request, options?: RequestOptionsArgs) => Observable<Response>;\r\n}\r\n\r\nexport abstract class RESTService<T> {\r\n\r\n  private _path: string;\r\n  private _base: string;\r\n  private _baseHeaders: Headers;\r\n  private _dynamicHeaders: () => Headers;\r\n\r\n  protected transform: IRestTransform;\r\n  protected http: IHttp;\r\n\r\n  constructor(http: IHttp, config: IRestConfig) {\r\n    this.http = http;\r\n    this._base = config.baseUrl.replace(/\\/$/, '');\r\n    this._path = config.path.replace(/^\\//, '');\r\n    this._baseHeaders = config.baseHeaders ? config.baseHeaders : new Headers();\r\n    this._dynamicHeaders = config.dynamicHeaders ? config.dynamicHeaders : () => new Headers();\r\n    this.transform = config.transform ? config.transform : (response: Response): any => response.json();\r\n  }\r\n\r\n  public query(query?: IRestQuery, transform?: IRestTransform): Observable<any> {\r\n    let request: Observable<Response> = this.http.get(this.buildUrl(undefined, query), this.buildRequestOptions());\r\n    return request.pipe(\r\n      catchError((error: Response) => {\r\n        return new Observable<any>((subscriber: Subscriber<any>) => {\r\n          try {\r\n            subscriber.error(this.transform(error));\r\n          } catch (err) {\r\n            subscriber.error(error);\r\n          }\r\n        });\r\n      }),\r\n      map((res: Response) => {\r\n        if (transform) {\r\n          return transform(res);\r\n        }\r\n        return this.transform(res);\r\n      }),\r\n    );\r\n  }\r\n\r\n  public get(id: string | number, transform?: IRestTransform): Observable<any> {\r\n    let request: Observable<Response> = this.http.get(this.buildUrl(id), this.buildRequestOptions());\r\n    return request.pipe(\r\n      catchError((error: Response) => {\r\n        return new Observable<any>((subscriber: Subscriber<any>) => {\r\n          try {\r\n            subscriber.error(this.transform(error));\r\n          } catch (err) {\r\n            subscriber.error(error);\r\n          }\r\n        });\r\n      }),\r\n      map((res: Response) => {\r\n        if (transform) {\r\n          return transform(res);\r\n        }\r\n        return this.transform(res);\r\n      }),\r\n    );\r\n  }\r\n\r\n  public create(obj: T, transform?: IRestTransform): Observable<any> {\r\n    let requestOptions: RequestOptionsArgs = this.buildRequestOptions();\r\n    let request: Observable<Response> = this.http.post(this.buildUrl(), obj, requestOptions);\r\n    return request.pipe(\r\n      catchError((error: Response) => {\r\n        return new Observable<any>((subscriber: Subscriber<any>) => {\r\n          try {\r\n            subscriber.error(this.transform(error));\r\n          } catch (err) {\r\n            subscriber.error(error);\r\n          }\r\n        });\r\n      }),\r\n      map((res: Response) => {\r\n        if (res.status === 201) {\r\n          if (transform) {\r\n            return transform(res);\r\n          }\r\n          return this.transform(res);\r\n        } else {\r\n          return res;\r\n        }\r\n      }),\r\n    );\r\n  }\r\n\r\n  public update(id: string | number, obj: T, transform?: IRestTransform): Observable<any> {\r\n    let requestOptions: RequestOptionsArgs = this.buildRequestOptions();\r\n    let request: Observable<Response> = this.http.patch(this.buildUrl(id), obj, requestOptions);\r\n    return request.pipe(\r\n      catchError((error: Response) => {\r\n        return new Observable<any>((subscriber: Subscriber<any>) => {\r\n          try {\r\n            subscriber.error(this.transform(error));\r\n          } catch (err) {\r\n            subscriber.error(error);\r\n          }\r\n        });\r\n      }),\r\n      map((res: Response) => {\r\n        if (res.status === 200) {\r\n          if (transform) {\r\n            return transform(res);\r\n          }\r\n          return this.transform(res);\r\n        } else {\r\n          return res;\r\n        }\r\n      }),\r\n    );\r\n  }\r\n\r\n  public delete(id: string | number, transform?: IRestTransform): Observable<any> {\r\n    let request: Observable<Response> = this.http.delete(this.buildUrl(id), this.buildRequestOptions());\r\n    return request.pipe(\r\n      catchError((error: Response) => {\r\n        return new Observable<any>((subscriber: Subscriber<any>) => {\r\n          try {\r\n            subscriber.error(this.transform(error));\r\n          } catch (err) {\r\n            subscriber.error(error);\r\n          }\r\n        });\r\n      }),\r\n      map((res: Response) => {\r\n        if (res.status === 200) {\r\n          if (transform) {\r\n            return transform(res);\r\n          }\r\n          return this.transform(res);\r\n        } else {\r\n          return res;\r\n        }\r\n      }),\r\n    );\r\n  }\r\n\r\n  protected buildRequestOptions(): RequestOptionsArgs {\r\n    let requestHeaders: Headers = new Headers();\r\n    this._baseHeaders.forEach((value: string[], key: string) => {\r\n      requestHeaders.set(key, value);\r\n    });\r\n    this._dynamicHeaders().forEach((value: string[], key: string) => {\r\n      requestHeaders.set(key, value);\r\n    });\r\n    let requestOptions: RequestOptionsArgs = {\r\n      headers: requestHeaders,\r\n    };\r\n    return requestOptions;\r\n  }\r\n\r\n  protected buildUrl(id?: string | number, query?: IRestQuery): string {\r\n    let url: string = this._path ? this._path : '';\r\n    if (id) {\r\n      url += `/${id}`;\r\n    }\r\n    if (query) {\r\n      url += this.buildQuery(query);\r\n    }\r\n    url = `${this._base}/${url}`;\r\n    return url;\r\n  }\r\n\r\n  protected buildQuery(query: IRestQuery): string {\r\n    let url: string = '';\r\n    if (query) {\r\n      url += '?';\r\n      let params: string[] = [];\r\n      for (let key in query) {\r\n        let value: string | number | boolean = query[key];\r\n        if (value !== undefined) {\r\n          params.push(`${key}=${value}`);\r\n        }\r\n      }\r\n      url += params.join('&');\r\n    }\r\n    return url;\r\n  }\r\n}\r\n",
    "import { NgModule, ModuleWithProviders, Injector, InjectionToken, Provider } from '@angular/core';\r\nimport { HttpModule, Http } from '@angular/http';\r\n\r\nimport { HttpInterceptorService, IHttpInterceptorConfig } from './interceptors/http-interceptor.service';\r\nimport { URLRegExpInterceptorMatcher } from './interceptors/url-regexp-interceptor-matcher.class';\r\n\r\nexport const HTTP_CONFIG: InjectionToken<HttpConfig> = new InjectionToken<HttpConfig>('HTTP_CONFIG');\r\n\r\nexport type HttpConfig = {interceptors: IHttpInterceptorConfig[]};\r\n\r\nexport function httpFactory(http: Http, injector: Injector, config: HttpConfig): HttpInterceptorService {\r\n  return new HttpInterceptorService(http, injector, new URLRegExpInterceptorMatcher(), config.interceptors);\r\n}\r\n\r\nexport const HTTP_INTERCEPTOR_PROVIDER: Provider = {\r\n  provide: HttpInterceptorService,\r\n  useFactory: httpFactory,\r\n  deps: [Http, Injector, HTTP_CONFIG],\r\n};\r\n\r\n@NgModule({\r\n  imports: [\r\n    HttpModule,\r\n  ],\r\n})\r\nexport class CovalentHttpModule {\r\n  static forRoot(config: HttpConfig = {interceptors: []}): ModuleWithProviders {\r\n    return {\r\n      ngModule: CovalentHttpModule,\r\n      providers: [{\r\n          provide: HTTP_CONFIG,\r\n          useValue: config,\r\n        },\r\n        HTTP_INTERCEPTOR_PROVIDER,\r\n      ],\r\n    };\r\n  }\r\n}\r\n",
    "import { RequestOptionsArgs } from '@angular/http';\r\n\r\nimport { IHttpInterceptorMapping } from './http-interceptor-mapping.interface';\r\nimport { IHttpInterceptorMatcher } from './http-interceptor-matcher.interface';\r\n\r\n/**\r\n * Concrete implementation for http interceptor matchers.\r\n * This implementation uses regex to check mapping paths vs request url.\r\n */\r\nexport class URLRegExpInterceptorMatcher implements IHttpInterceptorMatcher {\r\n\r\n  matches(options: RequestOptionsArgs, mapping: IHttpInterceptorMapping): boolean {\r\n    return mapping.paths.filter((path: string) => {\r\n      path = path.replace(/\\*\\*/gi, '<>')\r\n                .replace(/\\*/gi, '[a-zA-Z0-9\\\\-_]+')\r\n                .replace(/<>/gi, '[a-zA-Z0-9\\\\-_\\/]*');\r\n      if (path) {\r\n        path += '(\\\\?{1}.*)?$';\r\n        return new RegExp(path).test(options.url);\r\n      }\r\n      return false;\r\n    }).length > 0;\r\n  }\r\n\r\n}\r\n",
    "import { Injectable, Type, Injector } from '@angular/core';\r\nimport { Http, RequestOptionsArgs, Response, Request, RequestMethod } from '@angular/http';\r\n\r\nimport { Observable, Subscriber } from 'rxjs';\r\n\r\nimport { IHttpInterceptor } from './http-interceptor.interface';\r\nimport { IHttpInterceptorMatcher } from './http-interceptor-matcher.interface';\r\nimport { IHttpInterceptorMapping } from './http-interceptor-mapping.interface';\r\n\r\nexport interface IHttpInterceptorConfig {\r\n  interceptor: Type<any>;\r\n  paths: string[];\r\n}\r\n\r\nexport class HttpInterceptorService {\r\n\r\n  private _requestInterceptors: IHttpInterceptorMapping[] = [];\r\n\r\n  constructor(private _http: Http,\r\n              private _injector: Injector,\r\n              private _httpInterceptorMatcher: IHttpInterceptorMatcher,\r\n              requestInterceptorConfigs: IHttpInterceptorConfig[]) {\r\n    requestInterceptorConfigs.forEach((config: IHttpInterceptorConfig) => {\r\n      this._requestInterceptors.push({\r\n        interceptor: <IHttpInterceptor>_injector.get(config.interceptor),\r\n        paths: config.paths,\r\n      });\r\n    });\r\n  }\r\n\r\n  public delete(url: string, requestOptions: RequestOptionsArgs = {}): Observable<Response> {\r\n    requestOptions.url = url;\r\n    requestOptions.method = RequestMethod.Delete;\r\n    return this.request(url, requestOptions);\r\n  }\r\n\r\n  public get(url: string, requestOptions: RequestOptionsArgs = {}): Observable<Response> {\r\n    requestOptions.url = url;\r\n    requestOptions.method = RequestMethod.Get;\r\n    return this.request(url, requestOptions);\r\n  }\r\n\r\n  public head(url: string, requestOptions: RequestOptionsArgs = {}): Observable<Response> {\r\n    requestOptions.url = url;\r\n    requestOptions.method = RequestMethod.Head;\r\n    return this.request(url, requestOptions);\r\n  }\r\n\r\n  public patch(url: string, data: any, requestOptions: RequestOptionsArgs = {}): Observable<Response> {\r\n    requestOptions.url = url;\r\n    requestOptions.method = RequestMethod.Patch;\r\n    requestOptions.body = data;\r\n    return this.request(url, requestOptions);\r\n  }\r\n\r\n  public post(url: string, data: any, requestOptions: RequestOptionsArgs = {}): Observable<Response> {\r\n    requestOptions.url = url;\r\n    requestOptions.method = RequestMethod.Post;\r\n    requestOptions.body = data;\r\n    return this.request(url, requestOptions);\r\n  }\r\n\r\n  public put(url: string, data: any, requestOptions: RequestOptionsArgs = {}): Observable<Response> {\r\n    requestOptions.url = url;\r\n    requestOptions.method = RequestMethod.Put;\r\n    requestOptions.body = data;\r\n    return this.request(url, requestOptions);\r\n  }\r\n\r\n  public request(url: string | Request, requestOptions: RequestOptionsArgs = {}): Observable<Response> {\r\n    let requestUrl: string;\r\n    if (url instanceof Request) {\r\n      requestUrl = url.url ? url.url : requestOptions.url;\r\n    } else {\r\n      requestUrl = url;\r\n    }\r\n    if (!requestOptions.url) {\r\n      requestOptions.url = requestUrl;\r\n    }\r\n    let interceptors: IHttpInterceptor[] = this._requestInterceptors.filter((mapping: IHttpInterceptorMapping) => {\r\n      return this._httpInterceptorMatcher.matches(requestOptions, mapping);\r\n    }).map((mapping: IHttpInterceptorMapping) => {\r\n      return mapping.interceptor;\r\n    });\r\n    return this._setupRequest(url, requestOptions, interceptors);\r\n  }\r\n\r\n  private _setupRequest(url: string | Request,\r\n                        requestOptions: RequestOptionsArgs,\r\n                        interceptors: IHttpInterceptor[]): Observable<Response> {\r\n    try {\r\n      requestOptions = this._requestResolve(requestOptions, interceptors);\r\n    } catch (e) {\r\n      return new Observable<any>((subscriber: Subscriber<any>) => {\r\n        subscriber.error(e);\r\n      });\r\n    }\r\n    return new Observable<any>((subscriber: Subscriber<any>) => {\r\n      this._http.request(url, requestOptions)\r\n      .subscribe((response: Response) => {\r\n        subscriber.next(this._responseResolve(response, interceptors));\r\n        subscriber.complete();\r\n      }, (error: Response) => {\r\n        subscriber.error(this._responseErrorResolve(error, interceptors));\r\n      });\r\n    });\r\n  }\r\n\r\n  private _requestResolve(requestOptions: RequestOptionsArgs, interceptors: IHttpInterceptor[]): RequestOptionsArgs {\r\n    interceptors.forEach((interceptor: IHttpInterceptor) => {\r\n      if (interceptor.onRequest) {\r\n        try {\r\n          requestOptions = interceptor.onRequest(requestOptions);\r\n        } catch (e) {\r\n          if (interceptor.onRequestError) {\r\n            requestOptions = interceptor.onRequestError(requestOptions);\r\n            if (!requestOptions) {\r\n              throw e;\r\n            }\r\n          } else {\r\n            throw e;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return requestOptions;\r\n  }\r\n\r\n  private _responseResolve(response: Response, interceptors: IHttpInterceptor[]): Response {\r\n    interceptors.forEach((interceptor: IHttpInterceptor) => {\r\n      if (interceptor.onResponse) {\r\n        response = interceptor.onResponse(response);\r\n      }\r\n    });\r\n    return response;\r\n  }\r\n\r\n  private _responseErrorResolve(error: Response, interceptors: IHttpInterceptor[]): Response {\r\n    interceptors.forEach((interceptor: IHttpInterceptor) => {\r\n      if (interceptor.onResponseError) {\r\n        error = interceptor.onResponseError(error);\r\n      }\r\n    });\r\n    return error;\r\n  }\r\n\r\n}\r\n"
  ],
  "names": [
    "Headers",
    "map",
    "Observable",
    "catchError",
    "http",
    "HttpModule",
    "NgModule",
    "Http",
    "Injector",
    "InjectionToken",
    "Request",
    "RequestMethod"
  ],
  "mappings": "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"
}
